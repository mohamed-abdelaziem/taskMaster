<!-- header of page -->
<div class="flex flex-wrap items-center md:flex-row justify-between mb-5">
  <h1 class="font-bold text-[30px] text-slate-900">Reminder List :</h1>
  <button
    (click)="onOpenCreateModel()"
    class="md:block hover:bg-transparent border hover:border-slate-900 hover:text-slate-900 bg-slate-900 text-white px-6 py-2 cursor-pointer rounded-lg font-semibold hover:opacity-90 transition duration-500"
  >
    Add Reminder
  </button>
</div>

<!-- reminders card -->
@if (getRemindersLoading()) {
  <app-global-loading></app-global-loading>
} @else {
    @if (reminderList.length == 0) {
            <h1 class="text-red-500 text-[30px] font-semibold text-center">Not Found Reminders</h1>

    }@else {
        <div class="grid md:grid-cols-2 gap-2">
  @for (item of reminderList; track $index) {
         <div
      class="bg-white rounded-2xl shadow-lg p-8 space-y-6 transition-all duration-500 cursor-pointer hover:-translate-y-1.5"
    >
      <!-- Header -->
      <div class="flex flex-wrap gap-2 justify-between items-center border-b pb-4">
        <h2 class="text-2xl font-bold text-slate-900">
          <i class="fa-solid fa-bell mr-2 text-slate-800"></i>
          Reminder Details
        </h2>

        <span
          [class]="item?.isAcknowledged ? 'bg-green-600' : 'bg-yellow-500'"
          class="px-4 py-1 rounded-full text-white text-sm font-semibold"
        >
          {{ item?.isAcknowledged ? 'Acknowledged' : 'Pending' }}
        </span>
      </div>

      <!-- Reminder Info Grid -->
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Title -->
        <div>
          <p class="text-sm text-slate-500">Title</p>
          <p class="font-semibold text-lg text-slate-900">
            {{ item?.title }}
          </p>
        </div>

        <!-- Description -->
        <div>
          <p class="text-sm text-slate-500">Description</p>
          <p class="font-semibold text-lg text-slate-900 line-clamp-1">
            {{ item?.description }}
          </p>
        </div>

        <!-- Reminder Date -->
        <div>
          <p class="text-sm text-slate-500">Reminder Date</p>
          <p class="text-slate-800">
            <i class="fa-solid fa-clock mr-1 text-slate-700"></i>
            {{ item?.reminderDateTime | date: 'short' }}
          </p>
        </div>

        <!-- User Info -->
        <div class="flex flex-col items-start justify-start w-full">
          <p class="text-sm text-slate-500">
            <span class="text-slate-900">UserId</span> :
            {{ item?.userId }}
          </p>
          <p class="text-sm text-slate-500">
            <span class="text-slate-900">ReminderId</span> :
            {{ item?.reminderId }}
          </p>
        </div>
      </div>

      <!-- Buttons -->
      <div class="btns flex-wrap flex items-center gap-2">
        <button
        (click)="setToUpdate(item?.reminderId,item)"
          class="border bg-yellow-500 text-white px-4 py-2 cursor-pointer rounded-lg font-semibold hover:bg-yellow-600 transition duration-500"
        >
          Update Reminder
        </button>

        <button
        (click)="deleteReminder(item?.reminderId!)"
          class="border bg-red-500 text-white px-4 py-2 cursor-pointer rounded-lg font-semibold hover:bg-red-600 transition duration-500"
        >
          Delete Reminder
        </button>
         <button
              [routerLink]="['/dashboard/reminder-details',item?.reminderId]"
              class="md:block disabled:opacity-80 border bg-slate-800 text-white w-10 h-10 rounded-full cursor-pointer  font-semibold hover:bg-slate-900 transition duration-500"
            >
            <i class="fa-solid fa-eye"></i>
            </button>
      </div>
    </div>
    
}
</div>
    }
}
<!-- end reminders card -->

<!-- create reminders model -->
<div
  #createReminderModal
  class="fixed overflow-auto hidden inset-0 duration-500 transition-all z-10000 bg-black/80 items-center justify-center h-screen"
>
  <form
    (submit)="createReminders()"
    [formGroup]="createRemindersForm"
    class="bg-white w-[90%] md:w-[70%] rounded-2xl shadow-lg p-6 space-y-4"
  >
    <!-- Title -->
    <h2 class="text-2xl font-bold text-slate-900 text-center">Create Reminder</h2>

    <!-- Reminder Title -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Title</label>
      <input
        type="text"
        name="title"
        formControlName="title"
        placeholder="Enter reminder title"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      />

      @if (createRemindersForm.get('title')?.errors && createRemindersForm.get('title')?.touched) {
        @if (createRemindersForm.get('title')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Title Is Required</p>
            </div>
          </div>
        }

        @if (createRemindersForm.get('title')?.getError('minlength')) {
          <div
            class="flex items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Title must be at least 3 chars</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Description -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Description</label>
      <textarea
        name="description"
        formControlName="description"
        rows="3"
        placeholder="Enter reminder description"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      ></textarea>

      @if (
        createRemindersForm.get('description')?.errors &&
        createRemindersForm.get('description')?.touched
      ) {
        @if (createRemindersForm.get('description')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Description Is Required</p>
            </div>
          </div>
        }

        @if (createRemindersForm.get('description')?.getError('minlength')) {
          <div
            class="flex items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Description must be at least 3 chars</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Reminder DateTime -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Reminder Date & Time</label>
      <input
        type="datetime-local"
        name="reminderDateTime"
        formControlName="reminderDateTime"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      />
      @if (
        createRemindersForm.get('reminderDateTime')?.errors &&
        createRemindersForm.get('reminderDateTime')?.touched
      ) {
        @if (createRemindersForm.get('reminderDateTime')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminder Date Time Is Required</p>
            </div>
          </div>
        }

        @if (createRemindersForm.errors) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">The Date Must Be In future</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- isAcknowledged -->
    <div class="flex gap-2 items-center mb-4">
      <label for="acknowledged-checkbox" class="block font-medium text-slate-700">
        Acknowledged
      </label>
      <input
        id="acknowledged-checkbox"
        type="checkbox"
        formControlName="isAcknowledged"
        class="w-4 h-4 border border-slate-300 rounded-xl bg-neutral-secondary-medium focus:ring-0 cursor-pointer"
      />

      @if (
        createRemindersForm.get('isAcknowledged')?.errors &&
        createRemindersForm.get('isAcknowledged')?.touched
      ) {
        @if (createRemindersForm.get('isAcknowledged')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Acknowledged Is Required</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Buttons -->
    <button
      type="submit"
      class="cursor-pointer w-full bg-slate-900 text-white py-3 rounded-xl font-semibold hover:bg-slate-800 transition"
    >
      @if (createRemindersLoading()) {
        Loading
      } @else {
        Save Reminder
      }
    </button>
    <button
      type="button"
      (click)="onCloseCreateModel()"
      class="cursor-pointer w-full bg-gray-200 text-slate-800 py-3 rounded-xl font-semibold hover:bg-slate-900 hover:text-white transition"
    >
      Cancel
    </button>
  </form>
</div>
<!-- end modal -->

<!-- end create reminders model -->












<!-- update reminders model -->
<div
  #updateReminderModal
  class="fixed overflow-auto hidden inset-0 duration-500 transition-all z-10000 bg-black/80 items-center justify-center h-screen"
>
  <form
    (submit)="updateReminders()"
    [formGroup]="updateRemindersForm"
    class="bg-white w-[90%] md:w-[70%] rounded-2xl shadow-lg p-6 space-y-4"
  >
    <!-- Title -->
    <h2 class="text-2xl font-bold text-slate-900 text-center">update Reminder</h2>

    <!-- Reminder Title -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Title</label>
      <input
        type="text"
        name="title"
        formControlName="title"
        placeholder="Enter reminder title"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      />

      @if (updateRemindersForm.get('title')?.errors && updateRemindersForm.get('title')?.touched) {
        @if (updateRemindersForm.get('title')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Title Is Required</p>
            </div>
          </div>
        }

        @if (updateRemindersForm.get('title')?.getError('minlength')) {
          <div
            class="flex items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Title must be at least 3 chars</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Description -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Description</label>
      <textarea
        name="description"
        formControlName="description"
        rows="3"
        placeholder="Enter reminder description"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      ></textarea>

      @if (
        updateRemindersForm.get('description')?.errors &&
        updateRemindersForm.get('description')?.touched
      ) {
        @if (updateRemindersForm.get('description')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Description Is Required</p>
            </div>
          </div>
        }

        @if (updateRemindersForm.get('description')?.getError('minlength')) {
          <div
            class="flex items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminders Description must be at least 3 chars</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Reminder DateTime -->
    <div>
      <label class="block mb-2 font-medium text-slate-700">Reminder Date & Time</label>
      <input
        type="datetime-local"
        name="reminderDateTime"
        formControlName="reminderDateTime"
        class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:outline-none focus:border-slate-900"
      />
      @if (
        updateRemindersForm.get('reminderDateTime')?.errors &&
        updateRemindersForm.get('reminderDateTime')?.touched
      ) {
        @if (updateRemindersForm.get('reminderDateTime')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Reminder Date Time Is Required</p>
            </div>
          </div>
        }

        @if (updateRemindersForm.errors) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">The Date Must Be In future</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- isAcknowledged -->
    <div class="flex gap-2 items-center mb-4">
      <label for="acknowledged-checkbox" class="block font-medium text-slate-700">
        Acknowledged
      </label>
      <input
        id="acknowledged-checkbox"
        type="checkbox"
        formControlName="isAcknowledged"
        class="w-4 h-4 border border-slate-300 rounded-xl bg-neutral-secondary-medium focus:ring-0 cursor-pointer"
      />

      @if (
        updateRemindersForm.get('isAcknowledged')?.errors &&
        updateRemindersForm.get('isAcknowledged')?.touched
      ) {
        @if (updateRemindersForm.get('isAcknowledged')?.getError('required')) {
          <div
            class="flex flex-wrap items-start gap-3 mt-1 p-4 rounded-xl bg-red-100 border border-red-300 text-red-800"
          >
            <i class="fa-solid fa-triangle-exclamation text-xl mt-1"></i>

            <div>
              <h4 class="font-semibold">Error</h4>
              <p class="text-sm">Acknowledged Is Required</p>
            </div>
          </div>
        }
      }
    </div>

    <!-- Buttons -->
    <button
      type="submit"
      class="cursor-pointer w-full bg-slate-900 text-white py-3 rounded-xl font-semibold hover:bg-slate-800 transition"
    >
      @if (updateRemindersLoading()) {
        Loading
      } @else {
        Update Reminder
      }
    </button>
    <button
      type="button"
      (click)="onCloseUpdateModel()"
      class="cursor-pointer w-full bg-gray-200 text-slate-800 py-3 rounded-xl font-semibold hover:bg-slate-900 hover:text-white transition"
    >
      Cancel
    </button>
  </form>
</div>
<!-- end modal -->

<!-- end update reminders model -->
